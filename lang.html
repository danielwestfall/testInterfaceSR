<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Announcer - Debug</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .debug-announcer {
            border: 2px dashed #ccc;
            padding: 0.5rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            background-color: #fafafa;
            margin-top: 1rem;
        }
        .label {
            display: inline-block;
            font-weight: bold;
            padding: 0.1rem 0.4rem;
            border-radius: 0.25rem;
            margin-right: 0.5rem;
        }
        .label-en {
            background-color: #3b82f6;
            color: white;
        }
        .label-es {
            background-color: #10b981;
            color: white;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <div class="p-8 bg-white rounded-2xl shadow-xl max-w-lg w-full flex flex-col items-center space-y-8">

        <!-- Main Button to trigger the announcement -->
        <button id="announceButton" class="px-6 py-3 bg-blue-500 text-white font-bold rounded-full shadow-lg hover:bg-blue-600 transition-colors focus:outline-none focus:ring-4 focus:ring-blue-300">
            Announce a Random Phrase
        </button>

        <!-- Visible live regions for debugging -->
        <div id="en-announcer" class="debug-announcer" role="status" aria-live="polite" aria-atomic="true" lang="en" tabindex="-1">
            <span class="label label-en">EN</span> <span class="content">&nbsp;</span>
        </div>
        <div id="es-announcer" class="debug-announcer" role="status" aria-live="polite" aria-atomic="true" lang="es" tabindex="-1">
            <span class="label label-es">ES</span> <span class="content">&nbsp;</span>
        </div>

        <!-- List of phrases -->
        <div class="w-full">
            <h2 class="text-xl font-semibold mb-4 text-center text-gray-700">Phrases to Announce</h2>
            <ul id="phraseList" class="space-y-2 text-center text-gray-600">
                <li data-lang="en" data-text="Hello, how are you?">Hello, how are you?</li>
                <li data-lang="es" data-text="Hola, ¿cómo estás?">Hola, ¿cómo estás?</li>
                <li data-lang="en" data-text="Good morning!">Good morning!</li>
                <li data-lang="es" data-text="¡Buenos días!">¡Buenos días!</li>
                <li data-lang="en" data-text="Thank you very much.">Thank you very much.</li>
                <li data-lang="es" data-text="Muchas gracias.">Muchas gracias.</li>
            </ul>
        </div>
    </div>

    <script>
        const announceButton = document.getElementById('announceButton');
        const enAnnouncer = document.querySelector('#en-announcer .content');
        const esAnnouncer = document.querySelector('#es-announcer .content');
        const phrases = document.querySelectorAll('#phraseList li');

        const phraseArray = Array.from(phrases).map(item => ({
            lang: item.getAttribute('data-lang'),
            text: item.getAttribute('data-text')
        }));

        const announceRandomPhrase = () => {
            const randomIndex = Math.floor(Math.random() * phraseArray.length);
            const selectedPhrase = phraseArray[randomIndex];

            // Clear content with NBSP so you can visually see it's cleared
            enAnnouncer.textContent = '\u00A0';
            esAnnouncer.textContent = '\u00A0';

            setTimeout(() => {
                if (selectedPhrase.lang === 'en') {
                    enAnnouncer.textContent = selectedPhrase.text;
                } else if (selectedPhrase.lang === 'es') {
                    esAnnouncer.textContent = selectedPhrase.text;
                }
            }, 200);
        };

        announceButton.addEventListener('click', announceRandomPhrase);
    </script>
</body>
</html>
